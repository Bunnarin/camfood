{% load core_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice #{{ object_dict.id }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @page {
            size: A4;
            margin: 0;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 2cm;
            color: #333;
        }
        .invoice-header {
            border-bottom: 2px solid #0d6efd;
            margin-bottom: 30px;
            padding-bottom: 15px;
        }
        .company-name {
            font-size: 24px;
            font-weight: bold;
            color: #0d6efd;
        }
        .invoice-title {
            font-size: 28px;
            font-weight: bold;
            text-align: right;
        }
        .invoice-info {
            text-align: right;
        }
        .info-label {
            font-weight: bold;
            color: #666;
            text-align: right;
        }
        .table thead {
            background-color: #0d6efd;
            color: white;
        }
        .total-section {
            margin-top: 30px;
        }
        .total-amount-box {
            text-align: right;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background-color: #f8f9fa;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .total-amount-label {
            font-size: 16px;
            color: #666;
            margin-bottom: 5px;
        }
        .total-amount-value {
            font-size: 24px;
            font-weight: bold;
            color: #0d6efd;
        }
        .signature-box {
            text-align: center;
            padding: 15px;
            height: 100%;
        }
        .signature-line {
            border-top: 1px solid #000;
            width: 80%;
            margin: 0 auto 5px;
            padding-top: 30px;
        }
        .signature-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        .signature-name {
            font-weight: bold;
            margin-top: 5px;
        }
    </style>
    <script>
        window.print();
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="row invoice-header">
            <!-- the camfood should be on the left and invoice on the right -->
            <div class="col-6"><div class="company-name">Camfood</div></div>
            <div class="col-6"><div class="invoice-title">INVOICE</div></div>
            <div class="invoice-info"><span class="info-label">Invoice #:</span> {{ object_dict.id }}</div>
            <div class="invoice-info"><span class="info-label">Date:</span> {{ object_dict.created_on }}</div>    
        </div>

        <!-- Bill To -->
        <div class="row mb-4">
            <div class="col-md-6">
                <h5>Bill To:</h5>
                <div><strong>{{ object_dict.buyer }}</strong></div>
            </div>
            <div class="col-md-6 text-end">
                <h5>Prepared By:</h5>
                <div><strong>{{ object_dict.created_by }}</strong></div>
            </div>
        </div>

        <!-- Items Table -->
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        {% for field in table_fields %}
                            <th>{{ field|title }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for obj in object_list %}
                        <tr>
                            {% for field in table_fields %}
                                <td>
                                    {% with field_value=obj|get_attr_from_object:field %}
                                        {{ field_value }}
                                    {% endwith %}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Total and Signatures -->
        <div class="total-section">
            <div class="row g-0">
                <!-- Seller Signature -->
                <div class="col-4 signature-box">
                    <div class="signature-line"></div>
                    <div class="signature-label">Seller's Signature</div>
                    <div class="signature-name">{{ object_dict.created_by }}</div>
                </div>
                
                <!-- Customer Signature -->
                <div class="col-4 signature-box">
                    <div class="signature-line"></div>
                    <div class="signature-label">Customer's Signature</div>
                    <div class="signature-name">{{ object_dict.buyer }}</div>
                </div>
                
                <!-- Total Amount -->
                <div class="col-4">
                    <div class="total-amount-box">
                        <div class="total-amount-label">Total Amount</div>
                        <div class="total-amount-value">áŸ› {{ object_dict.price }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>